<!DOCTYPE HTML>
<!--
	Solid State by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en">
	<head>
		<title>GoogleSheetsDB - Alexandre ZANNI</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
		<link rel="stylesheet" href="assets/css/style.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>

		<input type="text" id="inputFruitsAndVegetables0" onkeyup="searchTable('inputFruitsAndVegetables0','tableFruitsAndVegetables', 0)" placeholder="Chercher 'aliment végétal'..." title="Type in a name">
		<input type="text" id="inputFruitsAndVegetables1" onkeyup="searchTable('inputFruitsAndVegetables1','tableFruitsAndVegetables', 1)" placeholder="Chercher 'famille'..." title="Type in a name">
		<input type="text" id="inputFruitsAndVegetables2" onkeyup="searchTable('inputFruitsAndVegetables2','tableFruitsAndVegetables', 2)" placeholder="Chercher 'type'..." title="Type in a name">
		<input type="text" id="inputFruitsAndVegetables3" onkeyup="searchTable('inputFruitsAndVegetables3','tableFruitsAndVegetables', 3)" placeholder="Chercher 'quantité'..." title="Type in a name">
		<input type="text" id="inputFruitsAndVegetables4" onkeyup="searchBinaryOperatorTable('inputFruitsAndVegetables4','tableFruitsAndVegetables', 3)" placeholder="Chercher 'opérateur binaire' (nombre à virgule doit avoir point)..." title="Type in a name">
		<div id="binaryOperators"></div>
		<!-- URL dataFruits&Vegetables : https://fr.wikipedia.org/wiki/Liste_des_plantes_potag%C3%A8res_par_familles_botaniques -->
		<div id="tableFruitsAndVegetables" class="table-wrapper"></div>

		<!-- Scripts -->
			<script>
			// ex URL publique : https://jsonplaceholder.typicode.com/todos/1

			var tab_name = 'FruitsAndVegetables';
			var spreadsheet_id = '1--6J7INOfcWZ0sUVJAlIzgxMuaZXoCnPfatQSVgiJMw';
			var api_key = 'AIzaSyDm9fuP9PrVDfHGWn3xNxTiwVI1aaQ4H7o'; // AIzaSyBlrDnOY8VVaUMm_39N3kJtiwhvTrI5PvE
			var url = 'https://sheets.googleapis.com/v4/spreadsheets/' +
			           spreadsheet_id + '/values/' + tab_name +
			           '?alt=json&key=' + api_key;
			// console.log(url);

			function loadJSON(callback) {
				 var xobj = new XMLHttpRequest();
						 xobj.overrideMimeType("application/json");
				 xobj.open('GET', url, true); // Replace 'my_data' with the path to your file
				 xobj.onreadystatechange = function () {
							 if (xobj.readyState == 4 && xobj.status == "200") {
								 // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
								 callback(xobj.responseText);
							 }
				 };
				 xobj.send(null);
		 }

			 loadJSON(function(response) {
			  // Parse JSON string into object
			    var actual_JSON = JSON.parse(response);
					realJSON = actual_JSON.values;
					// console.log(response);
					// console.log(realJSON);
					GFG_FUN(realJSON, 'tableFruitsAndVegetables');
			 });

			 function GFG_FUN(list, tableId) {
            var cols = [];

            for (var i = 0; i < list.length; i++) {
                for (var k in list[i]) {
                    if (cols.indexOf(k) === -1) {

                        // Push all keys to the array
                        cols.push(k);
                    }
                }
            }

            // Create a table element
            var table = document.createElement("table");
						table.setAttribute("class", "sortable");
						table.setAttribute("border", "1px solid black");
						table.setAttribute("id", "tableData");

            // Create theader
					 var thead = document.createElement("thead");
					 var tr = table.appendChild(thead);

            for (var i = 0; i < cols.length; i++) {
                // Create the table header th element
                var theader = document.createElement("th");
								// theader.innerHTML = list[0][0];
                theader.innerHTML = list[0][i];
                // Append columnName to the table row
                tr.appendChild(theader);
            }

            // Adding the data to the table
            for (var i = 1; i < list.length; i++) {
                // Create a new row
                trow = table.insertRow(-1);
                for (var j = 0; j < cols.length; j++) {
                    var cell = trow.insertCell(-1);
                    // Inserting the cell at particular place
                    cell.innerHTML = list[i][cols[j]];
                }
            }

            // Add the newly created table containing json data
            var el = document.getElementById(tableId);
            el.innerHTML = "";
            el.appendChild(table);
        }

				function clickButton() {
					var test = document.getElementById('test');
					console.log(test.style);
					console.log(test.style.background);
					test.style.background = "red";
				}

				createButtons(['<','< OR =','>','> OR ='], 'binaryOperators');

				function createButtons(textButtons, div) {
					var textOfButtons = textButtons;
				  for (i = 0; i < textOfButtons.length; i++) {
				    //creates a new button
				    button = document.createElement('Button');

				    //sets correct button number and button text
				    var index = i + 1;
						var text = document.createTextNode(textButtons[i]);
				    button.appendChild(text);
						button.setAttribute("id", 'Btn' + index);
						// button.innerHTML="test";
				    button.className += "button";
				    button.className += " default-button";
						var buttonGroup = document.getElementById(div);
						console.log(buttonGroup);
				    buttonGroup.appendChild(button);
						   // document.body.appendChild(button);
				  }
				}

			</script>
			<script src="assets/js/sorttable.js"></script>
			<script src="assets/js/searchtable.js"></script>
			<script src="assets/js/binaryoperatorssearchtable.js"></script>

	</body>
</html>
